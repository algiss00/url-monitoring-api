# 1. Choose the base image. In this case, we are using the JDK 17 image to run the Spring Boot application.
FROM openjdk:17-jdk-slim

# 2. Set the working directory inside the Docker container.
WORKDIR /app

# 3. Copy the pom.xml file and source files into the working directory in the container.
COPY pom.xml ./
COPY src ./src

# 4. Download dependencies using Maven.
RUN ./mvnw dependency:resolve

# 5. Build the jar file of the application.
RUN ./mvnw package -DskipTests

# 6. Specify the command that will run when the container starts. This uses the jar file generated by Maven.
ENTRYPOINT ["java", "-jar", "target/code-assessment-0.0.1-SNAPSHOT.jar"]

# 7. Set the port on which the application will run.
EXPOSE 8080
